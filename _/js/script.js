$(document).ready(function(){function a(a){json.sort(function(a,b){return a.id-b.id}),c.innerHTML="";var b="";for(i=0;i<a.length;i++)b+="<div class='col-md-6'><div id='"+a[i].id+"' class='user-card'><div class='col-md-4'><img class='avatar clip-circle ' src='"+a[i].avatar+"'></div><div class='col-md-8'><h4>"+a[i].firstName+" "+a[i].lastName+"</h4><ul><li>",b+=""!==a[i].phone?"Phone: "+a[i].phone:"Phone number unavailable",b+="</li><li>",b+=""!==a[i].email?"Email: "+a[i].email:"Email address unavailable",b+="</li><li>",b+=""!==a[i].address.city?"City: "+a[i].address.city:"Location address unavailable",b+="</li><li> <a href='#' id='"+a[i].id+"' >View User</a></li> </ul>",b+="</div></div></div>";c.insertAdjacentHTML("beforeend",b)}function b(a){if(a.target!==a.currentTarget&&0==f&&""!==a.target.id){if("back-btn"==a.target.id);else{f++;var b=a.target.id,c=new XMLHttpRequest;c.open("GET","http://challenge-dev.starmarkcloud.com/users/1"),c.onload=function(){var a=JSON.parse(d.responseText);c.status>=200&&c.status<400?e(a,b):console.log("We connected to the server, but it returned an error.")}}d.onerror=function(){console.log("Connection error")},c.send()}}var c=document.getElementById("user-info"),d=new XMLHttpRequest;d.open("GET","http://challenge-dev.starmarkcloud.com/users"),d.onload=function(){var b=JSON.parse(d.responseText);d.status>=200&&d.status<400?a(b):console.log("We connected to the server, but it returned an error.")},d.onerror=function(){console.log("Connection error")},d.send(),$("#filterForm").submit(function(a){function b(a){c.innerHTML="";var b="";for(i=0;i<a.length;i++){var d=a[i].address.city;d==f?(b+="<div class='col-md-6'><div id='"+a[i].id+"' class='user-card'><div class='col-md-4'><img class='avatar clip-circle ' src='"+a[i].avatar+"'></div><div class='col-md-8'><h4>"+a[i].firstName+" "+a[i].lastName+"</h4><ul><li>",b+=""!==a[i].phone?"Phone: "+a[i].phone:"Phone number unavailable",b+="</li><li>",b+=""!==a[i].email?"Email: "+a[i].email:"Email address unavailable",b+="</li><li>",b+=""!==a[i].address.city?"City: "+a[i].address.city:"Location address unavailable",b+="</li><li> <a href='#' id='"+a[i].id+"' >View User</a></li> </ul>",b+="</div></div></div>"):console.log("Not in that city")}c.insertAdjacentHTML("beforeend",b)}a.preventDefault();var e=JSON.parse(d.responseText),f=document.getElementById("city").value;b(e)});var e=function(a,b){c.innerHTML="";var d=a[b],e="",f="",h=function(){for(i=0;i<d.tags.length;i++)f+=i<d.tags.length-1?d.tags[i]+", ":d.tags[i]};h(),e+="<div class='col-md-12'><a href='#' id='back-btn'>Back to list</a><div id='my-guy' class='main-card'><div class='col-md-4'><img class='avatar clip-circle ' src='"+d.avatar+"'></div><div class='col-md-8'><h3>"+d.firstName+" "+d.lastName+"</h3><ul><li>",e+=""!==d.phone?"Phone: "+d.phone:"Phone number unavailable",e+="</li><li>",e+=""!==d.email?"Email: "+d.email:"Email address unavailable",e+="</li><li>",e+=""!==d.address.city?"City: "+d.address.city:"Location unavailable",e+="</li><li>",e+=""!==d.dob?"Date of Birth: "+d.dob:"Date of birth unavailable",e+="</li><li>",e+=""!==f?"Tags: "+f:"Tags unavailable",e+="</li></ul>",e+="</div></div></div>",c.insertAdjacentHTML("beforeend",e);var j=document.getElementById("back-btn");j.addEventListener("click",g)},f=0;c.addEventListener("click",b);var g=function(){var b=JSON.parse(d.responseText);f--,a(b)},h=document.getElementById("refresh");h.addEventListener("click",g,!1)});